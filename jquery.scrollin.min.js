/* * Fade elements in as the user scrolls or resizes content into view. * Unbinds itself when all elements have been displayed. * Can be used multiple times safely. * * By Evan Leis * * Copyright (c) 2007-2012 Mika Tuupola * * Licensed under the MIT license: *   http://www.opensource.org/licenses/mit-license.php */(function(c,e,f){var d="ScrollIn";var h={handler:f,fadeSpeed:2500,handlerEasing:"swing",handlerCallback:f,offset:40,handleAtStart:true,initial:function(j,k,i){if(k>i){j.hide()}}};var a=c.document;function b(j,i){this._id=g();this._defaults=h;this._name=d;this.element=j;this.init(i)}b.prototype.init=function(i){this.options=this.makeOptions(i);this.mappedElements=this.prepareElements();if(this.options.handleAtStart){this.handleScroll()}this.bindScroll()};b.prototype.makeOptions=function(i){i=e.extend(true,{},h,i);if(i.handler===f){i.handler=this.makeDefaultHandler(i)}return i};b.prototype.makeDefaultHandler=function(i){return function(k,l,j){k.fadeIn(i.fadeSpeed,i.handlerEasing,i.handlerCallback)}};b.prototype.prepareElements=function(){var j=this;var l={};j.element.each(function(m,o){var n=e(o);var p=n.position().top;if(l[p]===f){l[p]=[n]}else{l[p].push(n)}});var i=j.getLimit();for(var k in l){e(l[k]).each(function(m,n){j.options.initial(e(n),k,i)})}return l};b.prototype.getLimit=function(){var l=e(c);var k=l.height();var m=l.scrollTop();var j=m+k;var i=j+this.options.offset;return i};b.prototype.getEventName=function(){var i="scroll.fader-"+this._id;var j="resize.fader-"+this._id;return[i,j].join(" ")};b.prototype.bindScroll=function(){var j=this;var i=j.getEventName();e(c).bind(i,function(){j.handleScroll()})};b.prototype.unbindScroll=function(){var i=this.getEventName();e(c).unbind(i)};b.prototype.handleScroll=function(){var j=this;var i=j.getLimit();var n={};var k=false;for(var m in j.mappedElements){var l=j.mappedElements[m];if(m<=i){e(l).each(function(o,q){var p=e(q);j.options.handler(p,m,i)})}else{n[m]=l;k=true}}this.mappedElements=n;if(!k){this.unbindScroll()}};e.fn[d]=function(i){new b(this,i)};function g(){var i=function(){return(((1+Math.random())*65536)|0).toString(16).substring(1)};return(i()+i()+"-"+i()+"-"+i()+"-"+i()+"-"+i()+i()+i())}})(window,jQuery);